{"ast":null,"code":"var _jsxFileName = \"/home/neo/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/python_pro/django_and_drf/hard/app_02/front/src/components/posts/CreatePost.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext } from \"react\";\nimport { Button, Modal, Form } from \"react-bootstrap\";\nimport axiosService from \"../../helpers/axios\";\nimport { getUser } from \"../../hooks/user.actions\";\nimport { Context } from \"../Layout\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction CreatePost(props) {\n  _s();\n  const {\n    refresh\n  } = props;\n  const [show, setShow] = useState(false);\n  const [validated, setValidated] = useState(false);\n  const [form, setForm] = useState({\n    author: \"\",\n    body: \"\"\n  });\n  const {\n    setToaster\n  } = useContext(Context);\n  const user = getUser();\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n  const handleSubmit = event => {\n    event.preventDefault();\n    const createPostForm = event.currentTarget;\n    if (createPostForm.checkValidity() === false) {\n      event.stopPropagation();\n    }\n    setValidated(true);\n    const data = {\n      author: user.id,\n      body: form.body\n    };\n    axiosService.post(\"/post/\", data).then(() => {\n      handleClose();\n      setToaster({\n        type: \"success\",\n        message: \"Post created 🚀\",\n        show: true,\n        title: \"Post Success\"\n      });\n      setForm({});\n      refresh();\n    }).catch(() => {\n      setToaster({\n        type: \"danger\",\n        message: \"An error occurred.\",\n        show: true,\n        title: \"Post Error\"\n      });\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n      className: \"my-3 w-75\",\n      children: /*#__PURE__*/_jsxDEV(Form.Control, {\n        className: \"py-2 rounded-pill border-primary text-primary\",\n        \"data-testid\": \"show-modal-form\",\n        type: \"text\",\n        placeholder: \"Write a post\",\n        onClick: handleShow\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: show,\n      onHide: handleClose,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        className: \"border-0\",\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Create Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        className: \"border-0\",\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          noValidate: true,\n          validated: validated,\n          onSubmit: handleSubmit,\n          \"data-testid\": \"create-post-form\",\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            children: /*#__PURE__*/_jsxDEV(Form.Control, {\n              name: \"body\",\n              \"data-testid\": \"post-body-field\",\n              value: form.body,\n              onChange: e => setForm({\n                ...form,\n                body: e.target.value\n              }),\n              as: \"textarea\",\n              rows: 3\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: handleSubmit,\n          disabled: !form.body,\n          \"data-testid\": \"create-post-submit\",\n          children: \"Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(CreatePost, \"EqZKeftmqm/qTIP2JhAF98t9DEc=\");\n_c = CreatePost;\nexport default CreatePost;\nvar _c;\n$RefreshReg$(_c, \"CreatePost\");","map":{"version":3,"names":["React","useState","useContext","Button","Modal","Form","axiosService","getUser","Context","jsxDEV","_jsxDEV","Fragment","_Fragment","CreatePost","props","_s","refresh","show","setShow","validated","setValidated","form","setForm","author","body","setToaster","user","handleClose","handleShow","handleSubmit","event","preventDefault","createPostForm","currentTarget","checkValidity","stopPropagation","data","id","post","then","type","message","title","catch","children","Group","className","Control","placeholder","onClick","fileName","_jsxFileName","lineNumber","columnNumber","onHide","Header","closeButton","Title","Body","noValidate","onSubmit","name","value","onChange","e","target","as","rows","Footer","variant","disabled","_c","$RefreshReg$"],"sources":["/home/neo/Рабочий стол/python_pro/django_and_drf/hard/app_02/front/src/components/posts/CreatePost.jsx"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { Button, Modal, Form } from \"react-bootstrap\";\nimport axiosService from \"../../helpers/axios\";\nimport { getUser } from \"../../hooks/user.actions\";\nimport { Context } from \"../Layout\";\n\nfunction CreatePost(props) {\n  const { refresh } = props;\n  const [show, setShow] = useState(false);\n  const [validated, setValidated] = useState(false);\n  const [form, setForm] = useState({\n    author: \"\",\n    body: \"\",\n  });\n\n  const { setToaster } = useContext(Context);\n\n  const user = getUser();\n\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    const createPostForm = event.currentTarget;\n\n    if (createPostForm.checkValidity() === false) {\n      event.stopPropagation();\n    }\n\n    setValidated(true);\n\n    const data = {\n      author: user.id,\n      body: form.body,\n    };\n\n    axiosService\n      .post(\"/post/\", data)\n      .then(() => {\n        handleClose();\n        setToaster({\n          type: \"success\",\n          message: \"Post created 🚀\",\n          show: true,\n          title: \"Post Success\",\n        });\n        setForm({});\n        refresh();\n      })\n      .catch(() => {\n        setToaster({\n          type: \"danger\",\n          message: \"An error occurred.\",\n          show: true,\n          title: \"Post Error\",\n        });\n      });\n  };\n\n  return (\n    <>\n      <Form.Group className=\"my-3 w-75\">\n        <Form.Control\n          className=\"py-2 rounded-pill border-primary text-primary\"\n          data-testid=\"show-modal-form\"\n          type=\"text\"\n          placeholder=\"Write a post\"\n          onClick={handleShow}\n        />\n      </Form.Group>\n\n      <Modal show={show} onHide={handleClose}>\n        <Modal.Header closeButton className=\"border-0\">\n          <Modal.Title>Create Post</Modal.Title>\n        </Modal.Header>\n        <Modal.Body className=\"border-0\">\n          <Form\n            noValidate\n            validated={validated}\n            onSubmit={handleSubmit}\n            data-testid=\"create-post-form\"\n          >\n            <Form.Group className=\"mb-3\">\n              <Form.Control\n                name=\"body\"\n                data-testid=\"post-body-field\"\n                value={form.body}\n                onChange={(e) => setForm({ ...form, body: e.target.value })}\n                as=\"textarea\"\n                rows={3}\n              />\n            </Form.Group>\n          </Form>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button\n            variant=\"primary\"\n            onClick={handleSubmit}\n            disabled={!form.body}\n            data-testid=\"create-post-submit\"\n          >\n            Post\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </>\n  );\n}\n\nexport default CreatePost;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,UAAU,QAAQ,OAAO;AACnD,SAASC,MAAM,EAAEC,KAAK,EAAEC,IAAI,QAAQ,iBAAiB;AACrD,OAAOC,YAAY,MAAM,qBAAqB;AAC9C,SAASC,OAAO,QAAQ,0BAA0B;AAClD,SAASC,OAAO,QAAQ,WAAW;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAEpC,SAASC,UAAUA,CAACC,KAAK,EAAE;EAAAC,EAAA;EACzB,MAAM;IAAEC;EAAQ,CAAC,GAAGF,KAAK;EACzB,MAAM,CAACG,IAAI,EAAEC,OAAO,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;EACvC,MAAM,CAACkB,SAAS,EAAEC,YAAY,CAAC,GAAGnB,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACoB,IAAI,EAAEC,OAAO,CAAC,GAAGrB,QAAQ,CAAC;IAC/BsB,MAAM,EAAE,EAAE;IACVC,IAAI,EAAE;EACR,CAAC,CAAC;EAEF,MAAM;IAAEC;EAAW,CAAC,GAAGvB,UAAU,CAACM,OAAO,CAAC;EAE1C,MAAMkB,IAAI,GAAGnB,OAAO,CAAC,CAAC;EAEtB,MAAMoB,WAAW,GAAGA,CAAA,KAAMT,OAAO,CAAC,KAAK,CAAC;EACxC,MAAMU,UAAU,GAAGA,CAAA,KAAMV,OAAO,CAAC,IAAI,CAAC;EAEtC,MAAMW,YAAY,GAAIC,KAAK,IAAK;IAC9BA,KAAK,CAACC,cAAc,CAAC,CAAC;IACtB,MAAMC,cAAc,GAAGF,KAAK,CAACG,aAAa;IAE1C,IAAID,cAAc,CAACE,aAAa,CAAC,CAAC,KAAK,KAAK,EAAE;MAC5CJ,KAAK,CAACK,eAAe,CAAC,CAAC;IACzB;IAEAf,YAAY,CAAC,IAAI,CAAC;IAElB,MAAMgB,IAAI,GAAG;MACXb,MAAM,EAAEG,IAAI,CAACW,EAAE;MACfb,IAAI,EAAEH,IAAI,CAACG;IACb,CAAC;IAEDlB,YAAY,CACTgC,IAAI,CAAC,QAAQ,EAAEF,IAAI,CAAC,CACpBG,IAAI,CAAC,MAAM;MACVZ,WAAW,CAAC,CAAC;MACbF,UAAU,CAAC;QACTe,IAAI,EAAE,SAAS;QACfC,OAAO,EAAE,iBAAiB;QAC1BxB,IAAI,EAAE,IAAI;QACVyB,KAAK,EAAE;MACT,CAAC,CAAC;MACFpB,OAAO,CAAC,CAAC,CAAC,CAAC;MACXN,OAAO,CAAC,CAAC;IACX,CAAC,CAAC,CACD2B,KAAK,CAAC,MAAM;MACXlB,UAAU,CAAC;QACTe,IAAI,EAAE,QAAQ;QACdC,OAAO,EAAE,oBAAoB;QAC7BxB,IAAI,EAAE,IAAI;QACVyB,KAAK,EAAE;MACT,CAAC,CAAC;IACJ,CAAC,CAAC;EACN,CAAC;EAED,oBACEhC,OAAA,CAAAE,SAAA;IAAAgC,QAAA,gBACElC,OAAA,CAACL,IAAI,CAACwC,KAAK;MAACC,SAAS,EAAC,WAAW;MAAAF,QAAA,eAC/BlC,OAAA,CAACL,IAAI,CAAC0C,OAAO;QACXD,SAAS,EAAC,+CAA+C;QACzD,eAAY,iBAAiB;QAC7BN,IAAI,EAAC,MAAM;QACXQ,WAAW,EAAC,cAAc;QAC1BC,OAAO,EAAErB;MAAW;QAAAsB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACrB;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACQ,CAAC,eAEb3C,OAAA,CAACN,KAAK;MAACa,IAAI,EAAEA,IAAK;MAACqC,MAAM,EAAE3B,WAAY;MAAAiB,QAAA,gBACrClC,OAAA,CAACN,KAAK,CAACmD,MAAM;QAACC,WAAW;QAACV,SAAS,EAAC,UAAU;QAAAF,QAAA,eAC5ClC,OAAA,CAACN,KAAK,CAACqD,KAAK;UAAAb,QAAA,EAAC;QAAW;UAAAM,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAa;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC1B,CAAC,eACf3C,OAAA,CAACN,KAAK,CAACsD,IAAI;QAACZ,SAAS,EAAC,UAAU;QAAAF,QAAA,eAC9BlC,OAAA,CAACL,IAAI;UACHsD,UAAU;UACVxC,SAAS,EAAEA,SAAU;UACrByC,QAAQ,EAAE/B,YAAa;UACvB,eAAY,kBAAkB;UAAAe,QAAA,eAE9BlC,OAAA,CAACL,IAAI,CAACwC,KAAK;YAACC,SAAS,EAAC,MAAM;YAAAF,QAAA,eAC1BlC,OAAA,CAACL,IAAI,CAAC0C,OAAO;cACXc,IAAI,EAAC,MAAM;cACX,eAAY,iBAAiB;cAC7BC,KAAK,EAAEzC,IAAI,CAACG,IAAK;cACjBuC,QAAQ,EAAGC,CAAC,IAAK1C,OAAO,CAAC;gBAAE,GAAGD,IAAI;gBAAEG,IAAI,EAAEwC,CAAC,CAACC,MAAM,CAACH;cAAM,CAAC,CAAE;cAC5DI,EAAE,EAAC,UAAU;cACbC,IAAI,EAAE;YAAE;cAAAjB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACT;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACQ;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACT;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACG,CAAC,eACb3C,OAAA,CAACN,KAAK,CAACgE,MAAM;QAAAxB,QAAA,eACXlC,OAAA,CAACP,MAAM;UACLkE,OAAO,EAAC,SAAS;UACjBpB,OAAO,EAAEpB,YAAa;UACtByC,QAAQ,EAAE,CAACjD,IAAI,CAACG,IAAK;UACrB,eAAY,oBAAoB;UAAAoB,QAAA,EACjC;QAED;UAAAM,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACG,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CAAC;EAAA,eACR,CAAC;AAEP;AAACtC,EAAA,CAtGQF,UAAU;AAAA0D,EAAA,GAAV1D,UAAU;AAwGnB,eAAeA,UAAU;AAAC,IAAA0D,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}